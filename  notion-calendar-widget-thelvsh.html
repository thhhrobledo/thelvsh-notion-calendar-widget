<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notion Calendar Updates</title>
<style>
    body { font-family: sans-serif; padding: 1rem; background: #f8f9fa; }
    h2 { margin-bottom: .5rem; }
    ul { list-style: none; padding: 0; }
    li { background: white; margin: .5rem 0; padding: .75rem; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    small { color: #666; }
</style>
</head>
<body>

<h2>Latest Calendar Updates</h2>
<ul id="notion-updates">
    <li>Loading...</li>
</ul>

<script>
const NOTION_TOKEN = "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"; // Replace with your Notion integration token
const DATABASE_ID = "The-LVSH-229f21b41de180c29966d0cdfd825c20"; // Replace with your database ID

async function fetchNotionUpdates() {
    const response = await fetch(`https://api.notion.com/v1/databases/${DATABASE_ID}/query`, {
        method: "POST",
        headers: {
            "Authorization": `Bearer ${NOTION_TOKEN}`,
            "Notion-Version": "2022-06-28",
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            sorts: [{ timestamp: "last_edited_time", direction: "descending" }],
            page_size: 5
        })
    });

    const data = await response.json();
    const container = document.getElementById("notion-updates");
    container.innerHTML = "";

    if (!data.results || data.results.length === 0) {
        container.innerHTML = "<li>No recent updates found.</li>";
        return;
    }

    data.results.forEach(page => {
        const title = page.properties.Name?.title?.[0]?.plain_text || "Untitled Event";
        const lastEdited = new Date(page.last_edited_time).toLocaleString();
        container.innerHTML += `<li>
            <strong>${title}</strong><br>
            <small>Last updated: ${lastEdited}</small>
        </li>`;
    });
}

fetchNotionUpdates();
</script>

</body>
</html>
